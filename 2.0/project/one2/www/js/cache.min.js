blackberry.io.sandbox=false;var cache={get:function(a,c,d){if(this.isExisted(c)){d(this.buildfileurl(c));return}console.log("downloading "+a);try{blackberry.io.filetransfer.download(a,this.buildurl(c),function(e){console.log("file downloaded,fullPath: "+e.fullPath);d("file://"+e.fullPath)},function(e){console.log("Download failed");console.log("Error code: "+e.code);console.log("HTTP status: "+e.http_status);console.log("Source: "+e.source);console.log("Target: "+e.target);d(a)})}catch(b){console.log(b);d(a)}},isExisted:function(c){var b=this.buildfileurl(c);var a=new XMLHttpRequest();a.open("HEAD",b,false);a.send(null);console.log("Checking: "+b+" # "+a.status);if(a.status==0){return false}return true},buildurl:function(a){return blackberry.io.home+"/"+a+".jpg"},buildfileurl:function(a){return"file://"+this.buildurl(a)}};